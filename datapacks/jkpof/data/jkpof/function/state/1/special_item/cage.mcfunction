# 消耗和冷却
clear @s glass[custom_data={jkpof: ["cage"]}] 1
scoreboard players set @s jkpof.cd 20
playsound block.glass.place block @a

# 生成
summon marker ~-2 ~-2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~-1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~-1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~-1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~-1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~-1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~ ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~ ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~ ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~ ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~ ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~ ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~ ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~ ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~ ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~ ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~ ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~ ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
#summon marker ~ ~ ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~ ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~ ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~ ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~ ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~ ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~ ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~ ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~ ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~ ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~ ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~ ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~ ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 1 run summon marker ~ ~1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~1 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~1 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~1 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~1 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~1 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-2 ~2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~-1 ~2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~ ~2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~1 ~2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~2 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~2 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~2 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~2 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
summon marker ~2 ~2 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-2 ~3 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-2 ~3 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-2 ~3 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-2 ~3 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-2 ~3 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-1 ~3 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-1 ~3 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-1 ~3 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-1 ~3 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~-1 ~3 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~ ~3 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~ ~3 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~ ~3 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~ ~3 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~ ~3 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~1 ~3 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~1 ~3 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~1 ~3 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~1 ~3 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~1 ~3 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~2 ~3 ~-2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~2 ~3 ~-1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~2 ~3 ~ {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~2 ~3 ~1 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}
execute if score #ctrl_kid_mode jkpof.int matches 0 run summon marker ~2 ~3 ~2 {Tags: ["jkpof", "jkpof_glass", "jkpof_check_pos"]}

# 检查位置
execute as @e[type=marker, tag=jkpof_check_pos] at @s run function jkpof:state/1/special_item/check_pos
execute if score #ctrl_team jkpof.int matches 0 as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=1}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ red_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=2}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ blue_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=3}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ green_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=4}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ yellow_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=5}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ cyan_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=6}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ white_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=7}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ pink_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=8}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ gray_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=9}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ orange_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=10}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ lime_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=11}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ purple_stained_glass
execute if score #ctrl_team jkpof.int matches 1..2 as @s[scores={jkpof.team=12}] as @e[type=marker, tag=jkpof_glass] at @s run setblock ~ ~ ~ light_gray_stained_glass

# 清理
kill @e[type=marker, tag=jkpof_check_pos]
